{"version":3,"sources":["file:///D:/CongViec_HocTap/CongTy/Amobear/SupermarketTycoon3D/assets/Scripts/Options/PA_07/GamePlay/PA_07_HideMask.ts"],"names":["_decorator","Camera","Collider","Component","geometry","Node","PhysicsSystem","RigidBody","GameInfo","PA_07_GamePlay","SoundController","GameController","ccclass","property","PA_07_HideMask","start","registerEvent","node","on","EventType","TOUCH_START","touchStart","event","isCanTouch","getRaycastResult","touchPos","ray","Ray","Cam_2D","screenPointToRay","getLocationX","getLocationY","mask","maxDistance","queryTrigger","instance","raycastClosest","raycastClosestResult","collider","name","includes","PA_07","isStockFullBox","Instance","PlaySound","handleStockTheShelves","handleCollectItems","getComponent","enabled","destroy"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,Q,OAAAA,Q;AAAUC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,Q,OAAAA,Q;AAAeC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,a,OAAAA,a;AAAeC,MAAAA,S,OAAAA,S;;AAGzFC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,e,iBAAAA,e;;AACAC,MAAAA,c,iBAAAA,c;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBb,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;gCAGac,c,WADZF,OAAO,CAAC,gBAAD,C,UAEHC,QAAQ;AAAA;AAAA,2C,UAGRA,QAAQ;AAAA;AAAA,2C,UAGRA,QAAQ,CAACZ,MAAD,C,oCARb,MACaa,cADb,SACoCX,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,uDAWX,KAXW;AAAA;;AAchCY,QAAAA,KAAK,GAAS;AACpB,eAAKC,aAAL;AACH;;AAGOA,QAAAA,aAAa,GAAS;AAC1B,eAAKC,IAAL,CAAUC,EAAV,CAAab,IAAI,CAACc,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,UAA9C,EAA0D,IAA1D;AACH;;AAGOA,QAAAA,UAAU,CAACC,KAAD,EAA0B;AACxC,cAAI,CAAC;AAAA;AAAA,oCAASC,UAAd,EAA0B,OADc,CAGxC;AAEA;AACA;AACA;AACA;;AAEA,eAAKC,gBAAL,CAAsBF,KAAtB;AACH;;AAGOE,QAAAA,gBAAgB,CAACC,QAAD,EAA6B;AACjD,cAAIC,GAAG,GAAG,IAAItB,QAAQ,CAACuB,GAAb,EAAV;AACA,eAAKC,MAAL,CAAYC,gBAAZ,CAA6BJ,QAAQ,CAACK,YAAT,EAA7B,EAAsDL,QAAQ,CAACM,YAAT,EAAtD,EAA+EL,GAA/E,EAFiD,CAGjD;;AACA,gBAAMM,IAAI,GAAG,UAAb;AACA,gBAAMC,WAAW,GAAG,QAApB;AACA,gBAAMC,YAAY,GAAG,IAArB;;AAEA,cAAI5B,aAAa,CAAC6B,QAAd,CAAuBC,cAAvB,CAAsCV,GAAtC,EAA2CM,IAA3C,EAAiDC,WAAjD,EAA8DC,YAA9D,CAAJ,EAAiF;AAC7E,kBAAMG,oBAAoB,GAAG/B,aAAa,CAAC6B,QAAd,CAAuBE,oBAApD,CAD6E,CAE7E;AACA;;AACA,kBAAMC,QAAQ,GAAGD,oBAAoB,CAACC,QAAtC,CAJ6E,CAK7E;;AAEA,gBAAGA,QAAQ,CAACrB,IAAT,CAAcsB,IAAd,CAAmBC,QAAnB,CAA4B,KAA5B,KAAsC;AAAA;AAAA,sCAASC,KAAT,CAAeC,cAAxD,EAAwE;AACpE;AAAA;AAAA,sDAAgBC,QAAhB;AAAA;AAAA,sDAA0CC,SAA1C,CAAoD,YAApD;AACA,mBAAKnC,cAAL,CAAoBoC,qBAApB;AACA;AACH;;AAED,gBAAIP,QAAQ,CAACrB,IAAT,CAAcsB,IAAd,CAAmBC,QAAnB,CAA4B,YAA5B,CAAJ,EAA+C;AAC3C,mBAAK/B,cAAL,CAAoBqC,kBAApB,CAAuCR,QAAQ,CAACrB,IAAhD;AAEA;AAAA;AAAA,sDAAgB0B,QAAhB;AAAA;AAAA,sDAA0CC,SAA1C,CAAoD,YAApD;AAEAN,cAAAA,QAAQ,CAACrB,IAAT,CAAc8B,YAAd,CAA2BxC,SAA3B,EAAsCyC,OAAtC,GAAgD,KAAhD;AACAV,cAAAA,QAAQ,CAACrB,IAAT,CAAc8B,YAAd,CAA2B7C,QAA3B,EAAqC8C,OAArC,GAA+C,KAA/C;AACAV,cAAAA,QAAQ,CAACrB,IAAT,CAAc8B,YAAd,CAA2BxC,SAA3B,EAAsC0C,OAAtC;AACAX,cAAAA,QAAQ,CAACrB,IAAT,CAAc8B,YAAd,CAA2B7C,QAA3B,EAAqC+C,OAArC;AACH;AACJ;AACJ;;AAtEyC,O;;;;;iBAET,I;;;;;;;iBAGA,I;;;;;;;iBAGhB,I","sourcesContent":["\nimport { _decorator, Camera, Collider, Component, EventTouch, geometry, log, Node, PhysicsSystem, RigidBody } from 'cc';\nimport { PA_07_Camera } from './PA_07_Camera';\nimport { IronSource } from '../../../AdHelper/IronSource';\nimport { GameInfo } from '../../../Const/GameInfo';\nimport { PA_07_GamePlay } from './PA_07_GamePlay';\nimport { SoundController } from '../../../Controller/SoundController';\nimport { GameController } from '../../../Controller/GameController';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = PA_06_HideMask\n * DateTime = Fri Jan 03 2025 10:44:57 GMT+0700 (Indochina Time)\n * Author = hoanghiep2001\n * FileBasename = PA_06_HideMask.ts\n * FileBasenameNoExtension = PA_06_HideMask\n * URL = db://assets/Scripts/Options/PA_06/PA_06_HideMask.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n\n@ccclass('PA_07_HideMask')\nexport class PA_07_HideMask extends Component {\n    @property(GameController)\n    GameController: GameController = null;\n        \n    @property(PA_07_GamePlay)\n    PA_07_GamePlay: PA_07_GamePlay = null;\n\n    @property(Camera)\n    Cam_2D: Camera = null;\n\n\n    isClickBoxFirstTime: boolean = false;\n\n\n    protected start(): void {\n        this.registerEvent();\n    }\n\n\n    private registerEvent(): void {\n        this.node.on(Node.EventType.TOUCH_START, this.touchStart, this);\n    }\n\n\n    private touchStart(event: EventTouch): void {\n        if (!GameInfo.isCanTouch) return;\n\n        // IronSource.handleIronSourcePlaySound();\n\n        // if(GameInfo.isToStore || GameInfo.IsShowPopupInstall || GameInfo.currentSuccessClick >= 4) {\n        //     this.GameController.installHandle();\n        //     return;\n        // }\n\n        this.getRaycastResult(event);\n    }\n\n\n    private getRaycastResult(touchPos: EventTouch): void {\n        let ray = new geometry.Ray();\n        this.Cam_2D.screenPointToRay(touchPos.getLocationX(), touchPos.getLocationY(), ray);\n        // The following parameters are optional\n        const mask = 0xffffffff;\n        const maxDistance = 10000000;\n        const queryTrigger = true;\n\n        if (PhysicsSystem.instance.raycastClosest(ray, mask, maxDistance, queryTrigger)) {\n            const raycastClosestResult = PhysicsSystem.instance.raycastClosestResult;\n            // const hitPoint = raycastClosestResult.hitPoint\n            // const hitNormal = raycastClosestResult.hitNormal;\n            const collider = raycastClosestResult.collider;\n            // const distance = raycastClosestResult;   \n\n            if(collider.node.name.includes(\"Box\") && GameInfo.PA_07.isStockFullBox) {\n                SoundController.Instance(SoundController).PlaySound(\"placeSound\");\n                this.PA_07_GamePlay.handleStockTheShelves();\n                return;\n            }\n\n            if (collider.node.name.includes(\"Watermelon\")) {\n                this.PA_07_GamePlay.handleCollectItems(collider.node);\n\n                SoundController.Instance(SoundController).PlaySound(\"placeSound\")\n\n                collider.node.getComponent(RigidBody).enabled = false;\n                collider.node.getComponent(Collider).enabled = false;\n                collider.node.getComponent(RigidBody).destroy();\n                collider.node.getComponent(Collider).destroy();\n            }\n        }\n    }\n\n}\n\n"]}
{"version":3,"sources":["file:///D:/IEC/Testing/Amobear_Supermarket/assets/Scripts/Options/PA_06/PA_06_NPC_Controller.ts"],"names":["_decorator","Component","easing","Node","SkeletalAnimation","tween","GameInfo","ccclass","property","PA_06_NPC_Controller","start","showNPCs","isShowNPCs","scheduleCallback","schedule","currentCustomer","Npc_PosesToTurn","length","customer","node","children","newPos","position","turnPos","Npc_turnPos","time","active","unschedule","to","smooth","call","setRotationFromEuler","delay","getComponent","play","update","dt","isWin"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, easing, Node, SkeletalAnimation, tween } from 'cc';\r\nimport { GameInfo } from '../../Const/GameInfo';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = PA_06_NPC_Controller\r\n * DateTime = Fri Jan 03 2025 16:58:50 GMT+0700 (Indochina Time)\r\n * Author = hoanghiep2001\r\n * FileBasename = PA_06_NPC_Controller.ts\r\n * FileBasenameNoExtension = PA_06_NPC_Controller\r\n * URL = db://assets/Scripts/Options/PA_06/PA_06_NPC_Controller.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\r\n *\r\n */\r\n\r\n@ccclass('PA_06_NPC_Controller')\r\nexport class PA_06_NPC_Controller extends Component {\r\n\r\n\r\n    @property([Node])\r\n    Npc_PosesToTurn: Node[] = [];\r\n\r\n    @property([Node])\r\n    Npc_turnPos: Node[] = [];\r\n\r\n    currentCustomer: number = 0;\r\n\r\n    scheduleCallback: void = null;\r\n\r\n\r\n    isShowNPCs: boolean = false;\r\n\r\n\r\n    protected start(): void {\r\n\r\n\r\n    }\r\n\r\n\r\n    private showNPCs(): void {\r\n        this.isShowNPCs = true;\r\n\r\n        this.scheduleCallback = this.schedule(() => {\r\n            if (this.currentCustomer >= this.Npc_PosesToTurn.length) return;\r\n\r\n            const customer = this.node.children[this.currentCustomer];\r\n            const newPos = this.Npc_PosesToTurn[this.currentCustomer].position;\r\n            const turnPos = this.Npc_turnPos[this.currentCustomer].position;\r\n            let time: number = 1;\r\n\r\n            customer.active = true;\r\n\r\n            this.currentCustomer += 1;\r\n\r\n            switch (this.currentCustomer) {\r\n                case 1:\r\n                    time = 1;\r\n                    break;\r\n                case 2:\r\n                    time = 1.5;\r\n                    break;\r\n                case 3:\r\n                    time = 3;\r\n                    break;\r\n\r\n                case 4:\r\n                    time = 3.6;\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n\r\n            if (this.currentCustomer >= this.Npc_PosesToTurn.length) this.unschedule(this.scheduleCallback);\r\n\r\n            tween(customer)\r\n                .to(time, { position: newPos }, { easing: easing.smooth })\r\n                .call(() => {\r\n                    customer.setRotationFromEuler(0, 180, 0);\r\n                })\r\n                .start();\r\n\r\n            tween(customer)\r\n                .delay(time)\r\n                .to(0.6, { position: turnPos }, { easing: easing.smooth })\r\n                .call(() => customer.getComponent(SkeletalAnimation).play(\"idle\"))\r\n                .start();\r\n        }, 1)\r\n    }\r\n\r\n\r\n    protected update(dt: number): void {\r\n        if (GameInfo.isWin && !this.isShowNPCs) this.showNPCs();\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}
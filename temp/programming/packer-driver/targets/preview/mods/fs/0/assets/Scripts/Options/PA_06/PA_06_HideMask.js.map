{"version":3,"sources":["file:///D:/IEC/Testing/Amobear_Supermarket/assets/Scripts/Options/PA_06/PA_06_HideMask.ts"],"names":["_decorator","Camera","Component","geometry","Node","PhysicsSystem","GameInfo","PA_06_GamePlay","IronSource","ccclass","property","PA_06_HideMask","start","registerEvent","node","on","EventType","TOUCH_START","touchStart","event","isCanTouch","handleIronSourcePlaySound","getRaycastResult","touchPos","ray","Ray","Cam_2D","screenPointToRay","getLocationX","getLocationY","mask","maxDistance","queryTrigger","instance","raycastClosest","raycastClosestResult","collider","name","handleOpenBox","currentClickBox","handleStockTheShelves"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,Q,OAAAA,Q;AAAeC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,a,OAAAA,a;;AAChEC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,c,iBAAAA,c;;AACAC,MAAAA,U,iBAAAA,U;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;gCAGaW,c,WADZF,OAAO,CAAC,gBAAD,C,UAGHC,QAAQ;AAAA;AAAA,2C,UAGRA,QAAQ,CAACT,MAAD,C,oCANb,MACaU,cADb,SACoCT,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,uDASX,KATW;AAAA;;AAYhCU,QAAAA,KAAK,GAAS;AACpB,eAAKC,aAAL;AACH;;AAGOA,QAAAA,aAAa,GAAS;AAC1B,eAAKC,IAAL,CAAUC,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,UAA9C,EAA0D,IAA1D;AACH;;AAGOA,QAAAA,UAAU,CAACC,KAAD,EAA0B;AACxC,cAAI,CAAC;AAAA;AAAA,oCAASC,UAAd,EAA0B;AAE1B;AAAA;AAAA,wCAAWC,yBAAX,GAHwC,CAKxC;AACA;AACA;AACA;;AAEA,eAAKC,gBAAL,CAAsBH,KAAtB;AACH;;AAGOG,QAAAA,gBAAgB,CAACC,QAAD,EAA6B;AACjD,cAAIC,GAAG,GAAG,IAAIrB,QAAQ,CAACsB,GAAb,EAAV;AACA,eAAKC,MAAL,CAAYC,gBAAZ,CAA6BJ,QAAQ,CAACK,YAAT,EAA7B,EAAsDL,QAAQ,CAACM,YAAT,EAAtD,EAA+EL,GAA/E,EAFiD,CAGjD;;AACA,cAAMM,IAAI,GAAG,UAAb;AACA,cAAMC,WAAW,GAAG,QAApB;AACA,cAAMC,YAAY,GAAG,IAArB;;AAEA,cAAI3B,aAAa,CAAC4B,QAAd,CAAuBC,cAAvB,CAAsCV,GAAtC,EAA2CM,IAA3C,EAAiDC,WAAjD,EAA8DC,YAA9D,CAAJ,EAAiF;AAC7E,gBAAMG,oBAAoB,GAAG9B,aAAa,CAAC4B,QAAd,CAAuBE,oBAApD,CAD6E,CAE7E;AACA;;AACA,gBAAMC,QAAQ,GAAGD,oBAAoB,CAACC,QAAtC,CAJ6E,CAK7E;;AAEA,gBAAIA,QAAQ,CAACtB,IAAT,CAAcuB,IAAd,KAAuB,KAA3B,EAAkC;AAC9B,mBAAK9B,cAAL,CAAoB+B,aAApB;;AACA,kBAAI,KAAK/B,cAAL,CAAoBgC,eAApB,IAAuC,CAA3C,EAA8C;AAC1C,qBAAKhC,cAAL,CAAoBiC,qBAApB;AACH;AACJ;AACJ;AACJ;;AA1DyC,O;;;;;iBAGT,I;;;;;;;iBAGhB,I;;;AAwDrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\r\nimport { _decorator, Camera, Component, EventTouch, geometry, log, Node, PhysicsSystem } from 'cc';\r\nimport { GameInfo } from '../../Const/GameInfo';\r\nimport { PA_06_GamePlay } from './PA_06_GamePlay';\r\nimport { IronSource } from '../../AdHelper/IronSource';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = PA_06_HideMask\r\n * DateTime = Fri Jan 03 2025 10:44:57 GMT+0700 (Indochina Time)\r\n * Author = hoanghiep2001\r\n * FileBasename = PA_06_HideMask.ts\r\n * FileBasenameNoExtension = PA_06_HideMask\r\n * URL = db://assets/Scripts/Options/PA_06/PA_06_HideMask.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\r\n *\r\n */\r\n\r\n@ccclass('PA_06_HideMask')\r\nexport class PA_06_HideMask extends Component {\r\n\r\n    @property(PA_06_GamePlay)\r\n    PA_06_GamePlay: PA_06_GamePlay = null;\r\n\r\n    @property(Camera)\r\n    Cam_2D: Camera = null;\r\n\r\n\r\n    isClickBoxFirstTime: boolean = false;\r\n\r\n\r\n    protected start(): void {\r\n        this.registerEvent();\r\n    }\r\n\r\n\r\n    private registerEvent(): void {\r\n        this.node.on(Node.EventType.TOUCH_START, this.touchStart, this);\r\n    }\r\n\r\n\r\n    private touchStart(event: EventTouch): void {\r\n        if (!GameInfo.isCanTouch) return;\r\n\r\n        IronSource.handleIronSourcePlaySound();\r\n\r\n        // if(GameInfo.isToStore || GameInfo.IsShowPopupInstall || GameInfo.currentSuccessClick >= 4) {\r\n        //     this.GameController.installHandle();\r\n        //     return;\r\n        // }\r\n\r\n        this.getRaycastResult(event);\r\n    }\r\n\r\n\r\n    private getRaycastResult(touchPos: EventTouch): void {\r\n        let ray = new geometry.Ray();\r\n        this.Cam_2D.screenPointToRay(touchPos.getLocationX(), touchPos.getLocationY(), ray);\r\n        // The following parameters are optional\r\n        const mask = 0xffffffff;\r\n        const maxDistance = 10000000;\r\n        const queryTrigger = true;\r\n\r\n        if (PhysicsSystem.instance.raycastClosest(ray, mask, maxDistance, queryTrigger)) {\r\n            const raycastClosestResult = PhysicsSystem.instance.raycastClosestResult;\r\n            // const hitPoint = raycastClosestResult.hitPoint\r\n            // const hitNormal = raycastClosestResult.hitNormal;\r\n            const collider = raycastClosestResult.collider;\r\n            // const distance = raycastClosestResult;   \r\n\r\n            if (collider.node.name === \"Box\") {\r\n                this.PA_06_GamePlay.handleOpenBox();\r\n                if (this.PA_06_GamePlay.currentClickBox >= 2) {\r\n                    this.PA_06_GamePlay.handleStockTheShelves();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}
{"version":3,"sources":["file:///D:/CongViec_HocTap/CongTy/Amobear/SupermarketTycoon3D/assets/Scripts/Options/PA_06/PA_06_NPC_Controller.ts"],"names":["_decorator","Component","easing","Node","SkeletalAnimation","tween","GameInfo","ccclass","property","PA_06_NPC_Controller","start","showNPCs","isShowNPCs","scheduleCallback","schedule","currentCustomer","Npc_PosesToTurn","length","customer","node","children","newPos","position","turnPos","Npc_turnPos","time","active","unschedule","to","smooth","call","setRotationFromEuler","delay","getComponent","play","update","dt","isWin"],"mappings":"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","sourcesContent":["\nimport { _decorator, Component, easing, Node, SkeletalAnimation, tween } from 'cc';\nimport { GameInfo } from '../../Const/GameInfo';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = PA_06_NPC_Controller\n * DateTime = Fri Jan 03 2025 16:58:50 GMT+0700 (Indochina Time)\n * Author = hoanghiep2001\n * FileBasename = PA_06_NPC_Controller.ts\n * FileBasenameNoExtension = PA_06_NPC_Controller\n * URL = db://assets/Scripts/Options/PA_06/PA_06_NPC_Controller.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n\n@ccclass('PA_06_NPC_Controller')\nexport class PA_06_NPC_Controller extends Component {\n\n\n    @property([Node])\n    Npc_PosesToTurn: Node[] = [];\n\n    @property([Node])\n    Npc_turnPos: Node[] = [];\n\n    currentCustomer: number = 0;\n\n    scheduleCallback: void = null;\n\n\n    isShowNPCs: boolean = false;\n\n\n    protected start(): void {\n\n\n    }\n\n\n    private showNPCs(): void {\n        this.isShowNPCs = true;\n\n        this.scheduleCallback = this.schedule(() => {\n            if (this.currentCustomer >= this.Npc_PosesToTurn.length) return;\n\n            const customer = this.node.children[this.currentCustomer];\n            const newPos = this.Npc_PosesToTurn[this.currentCustomer].position;\n            const turnPos = this.Npc_turnPos[this.currentCustomer].position;\n            let time: number = 1;\n\n            customer.active = true;\n\n            this.currentCustomer += 1;\n\n            switch (this.currentCustomer) {\n                case 1:\n                    time = 1;\n                    break;\n                case 2:\n                    time = 1.5;\n                    break;\n                case 3:\n                    time = 3;\n                    break;\n\n                case 4:\n                    time = 3.6;\n                    break;\n                default:\n                    break;\n            }\n\n            if (this.currentCustomer >= this.Npc_PosesToTurn.length) this.unschedule(this.scheduleCallback);\n\n            tween(customer)\n                .to(time, { position: newPos }, { easing: easing.smooth })\n                .call(() => {\n                    customer.setRotationFromEuler(0, 180, 0);\n                })\n                .start();\n\n            tween(customer)\n                .delay(time)\n                .to(0.6, { position: turnPos }, { easing: easing.smooth })\n                .call(() => customer.getComponent(SkeletalAnimation).play(\"idle\"))\n                .start();\n        }, 1)\n    }\n\n\n    protected update(dt: number): void {\n        if (GameInfo.isWin && !this.isShowNPCs) this.showNPCs();\n    }\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}
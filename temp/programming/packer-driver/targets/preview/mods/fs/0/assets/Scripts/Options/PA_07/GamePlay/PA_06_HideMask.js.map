{"version":3,"sources":["file:///D:/CocosProjects/Amobear/SupermarketTycoon3D/assets/Scripts/Options/PA_07/GamePlay/PA_06_HideMask.ts"],"names":["_decorator","Camera","Component","geometry","Node","PhysicsSystem","IronSource","GameInfo","PA_07_GamePlay","ccclass","property","PA_07_HideMask","start","registerEvent","node","on","EventType","TOUCH_START","touchStart","event","isCanTouch","handleIronSourcePlaySound","getRaycastResult","touchPos","ray","Ray","Cam_2D","screenPointToRay","getLocationX","getLocationY","mask","maxDistance","queryTrigger","instance","raycastClosest","raycastClosestResult","collider","name","handleStockTheShelves"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACSA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,M,OAAAA,M;AAAQC,MAAAA,S,OAAAA,S;AAAuBC,MAAAA,Q,OAAAA,Q;AAAeC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,a,OAAAA,a;;AAEhEC,MAAAA,U,iBAAAA,U;;AACAC,MAAAA,Q,iBAAAA,Q;;AACAC,MAAAA,c,iBAAAA,c;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBV,U;AAE9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;gCAGaW,c,WADZF,OAAO,CAAC,gBAAD,C,UAGHC,QAAQ;AAAA;AAAA,2C,UAGRA,QAAQ,CAACT,MAAD,C,oCANb,MACaU,cADb,SACoCT,SADpC,CAC8C;AAAA;AAAA;;AAAA;;AAAA;;AAAA,uDASX,KATW;AAAA;;AAYhCU,QAAAA,KAAK,GAAS;AACpB,eAAKC,aAAL;AACH;;AAGOA,QAAAA,aAAa,GAAS;AAC1B,eAAKC,IAAL,CAAUC,EAAV,CAAaX,IAAI,CAACY,SAAL,CAAeC,WAA5B,EAAyC,KAAKC,UAA9C,EAA0D,IAA1D;AACH;;AAGOA,QAAAA,UAAU,CAACC,KAAD,EAA0B;AACxC,cAAI,CAAC;AAAA;AAAA,oCAASC,UAAd,EAA0B;AAE1B;AAAA;AAAA,wCAAWC,yBAAX,GAHwC,CAKxC;AACA;AACA;AACA;;AAEA,eAAKC,gBAAL,CAAsBH,KAAtB;AACH;;AAGOG,QAAAA,gBAAgB,CAACC,QAAD,EAA6B;AACjD,cAAIC,GAAG,GAAG,IAAIrB,QAAQ,CAACsB,GAAb,EAAV;AACA,eAAKC,MAAL,CAAYC,gBAAZ,CAA6BJ,QAAQ,CAACK,YAAT,EAA7B,EAAsDL,QAAQ,CAACM,YAAT,EAAtD,EAA+EL,GAA/E,EAFiD,CAGjD;;AACA,cAAMM,IAAI,GAAG,UAAb;AACA,cAAMC,WAAW,GAAG,QAApB;AACA,cAAMC,YAAY,GAAG,IAArB;;AAEA,cAAI3B,aAAa,CAAC4B,QAAd,CAAuBC,cAAvB,CAAsCV,GAAtC,EAA2CM,IAA3C,EAAiDC,WAAjD,EAA8DC,YAA9D,CAAJ,EAAiF;AAC7E,gBAAMG,oBAAoB,GAAG9B,aAAa,CAAC4B,QAAd,CAAuBE,oBAApD,CAD6E,CAE7E;AACA;;AACA,gBAAMC,QAAQ,GAAGD,oBAAoB,CAACC,QAAtC,CAJ6E,CAK7E;;AAEA,gBAAIA,QAAQ,CAACtB,IAAT,CAAcuB,IAAd,KAAuB,KAA3B,EAAkC;AAC9B;AACA,mBAAK7B,cAAL,CAAoB8B,qBAApB;AAEH;AACJ;AACJ;;AAzDyC,O;;;;;iBAGT,I;;;;;;;iBAGhB,I;;;AAuDrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["\nimport { _decorator, Camera, Component, EventTouch, geometry, log, Node, PhysicsSystem } from 'cc';\nimport { PA_07_Camera } from './PA_07_Camera';\nimport { IronSource } from '../../../AdHelper/IronSource';\nimport { GameInfo } from '../../../Const/GameInfo';\nimport { PA_07_GamePlay } from './PA_07_GamePlay';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = PA_06_HideMask\n * DateTime = Fri Jan 03 2025 10:44:57 GMT+0700 (Indochina Time)\n * Author = hoanghiep2001\n * FileBasename = PA_06_HideMask.ts\n * FileBasenameNoExtension = PA_06_HideMask\n * URL = db://assets/Scripts/Options/PA_06/PA_06_HideMask.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n\n@ccclass('PA_07_HideMask')\nexport class PA_07_HideMask extends Component {\n\n    @property(PA_07_GamePlay)\n    PA_07_GamePlay: PA_07_GamePlay = null;\n\n    @property(Camera)\n    Cam_2D: Camera = null;\n\n\n    isClickBoxFirstTime: boolean = false;\n\n\n    protected start(): void {\n        this.registerEvent();\n    }\n\n\n    private registerEvent(): void {\n        this.node.on(Node.EventType.TOUCH_START, this.touchStart, this);\n    }\n\n\n    private touchStart(event: EventTouch): void {\n        if (!GameInfo.isCanTouch) return;\n\n        IronSource.handleIronSourcePlaySound();\n\n        // if(GameInfo.isToStore || GameInfo.IsShowPopupInstall || GameInfo.currentSuccessClick >= 4) {\n        //     this.GameController.installHandle();\n        //     return;\n        // }\n\n        this.getRaycastResult(event);\n    }\n\n\n    private getRaycastResult(touchPos: EventTouch): void {\n        let ray = new geometry.Ray();\n        this.Cam_2D.screenPointToRay(touchPos.getLocationX(), touchPos.getLocationY(), ray);\n        // The following parameters are optional\n        const mask = 0xffffffff;\n        const maxDistance = 10000000;\n        const queryTrigger = true;\n\n        if (PhysicsSystem.instance.raycastClosest(ray, mask, maxDistance, queryTrigger)) {\n            const raycastClosestResult = PhysicsSystem.instance.raycastClosestResult;\n            // const hitPoint = raycastClosestResult.hitPoint\n            // const hitNormal = raycastClosestResult.hitNormal;\n            const collider = raycastClosestResult.collider;\n            // const distance = raycastClosestResult;   \n\n            if (collider.node.name === \"Box\") {\n                // this.PA_06_GamePlay.handleOpenBox();\n                this.PA_07_GamePlay.handleStockTheShelves();\n             \n            }\n        }\n    }\n\n}\n\n/**\n * [1] Class member could be defined like this.\n * [2] Use `property` decorator if your want the member to be serializable.\n * [3] Your initialization goes here.\n * [4] Your update function goes here.\n *\n * Learn more about scripting: https://docs.cocos.com/creator/3.4/manual/en/scripting/\n * Learn more about CCClass: https://docs.cocos.com/creator/3.4/manual/en/scripting/decorator.html\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.4/manual/en/scripting/life-cycle-callbacks.html\n */\n"]}
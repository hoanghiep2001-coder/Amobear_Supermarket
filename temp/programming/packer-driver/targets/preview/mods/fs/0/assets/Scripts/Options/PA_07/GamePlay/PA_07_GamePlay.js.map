{"version":3,"sources":["file:///D:/CongViec_HocTap/CongTy/Amobear/SupermarketTycoon3D/assets/Scripts/Options/PA_07/GamePlay/PA_07_GamePlay.ts"],"names":["_decorator","Component","easing","log","Node","tween","UIOpacity","Vec3","GameInfo","CTA","SoundController","ccclass","property","PA_07_GamePlay","start","Box","active","MelonInBoxes","children","filter","child","name","includes","MelonDisabled","Flour_Melon","showBox","showTut_1","Tut_1","getComponent","to","opacity","smooth","repeatForever","scale","handleCollectItems","node","isCanTouch","currentStockItem","worldPosition","Melon_AirPoint","sineIn","delay","currentCollectItem","sineOut","call","handleActiveMelonInBox","tweenNode","PA_07","isStockFullBox","handleStockTheShelves","Melon_AirPoint_2","handleActiveMelonInShelves","Tut_2","isWin","isStockFullShelve","PS_conffeti","Instance","PlaySound","update","dt","isCameraArrivedPont"],"mappings":"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","sourcesContent":["import { _decorator, Collider, Component, easing, log, Node, RigidBody, tween, UIOpacity, Vec3 } from 'cc';\nimport { GameInfo } from '../../../Const/GameInfo';\nimport { CTA } from '../../../Others/CTA';\nimport { SoundController } from '../../../Controller/SoundController';\nconst { ccclass, property } = _decorator;\n\n/**\n * Predefined variables\n * Name = PA_07_GamePlay\n * DateTime = Mon Jan 06 2025 13:56:45 GMT+0700 (Indochina Time)\n * Author = hoanghiep2001\n * FileBasename = PA_07_GamePlay.ts\n * FileBasenameNoExtension = PA_07_GamePlay\n * URL = db://assets/Scripts/Options/PA_07/PA_07_GamePlay.ts\n * ManualUrl = https://docs.cocos.com/creator/3.4/manual/en/\n *\n */\n\n@ccclass('PA_07_GamePlay')\nexport class PA_07_GamePlay extends Component {\n\n    @property(Node)\n    Box: Node = null;\n\n    @property(Node)\n    Tut_1: Node = null;\n    @property(Node)\n    Tut_2: Node = null;\n\n    @property(Node)\n    Melon_AirPoint: Node = null;\n\n    MelonInBoxes: Node[] = [];\n\n    currentCollectItem: number = 0;\n\n    @property(Node)\n    Melon_AirPoint_2: Node = null;\n    @property(Node)\n    Flour_Melon: Node = null;\n    MelonDisabled: Node[] = [];\n\n    currentStockItem: number = 0;\n\n    @property(Node)\n    PS_conffeti: Node = null;\n\n    @property(CTA)\n    CTA: CTA = null;\n\n\n    protected start(): void {\n        this.Box.active = false;\n\n        this.MelonInBoxes = this.Box.children.filter((child =>\n            child.name.includes(\"inBox\")\n        ));\n\n        this.MelonDisabled = this.Flour_Melon.children.filter((child =>\n            child.name.includes(\"disabled\")\n        ));\n    }\n\n\n    private showBox(): void {\n        this.Box.active = true;\n        this.showTut_1();\n    }\n\n\n    private showTut_1(): void {\n        this.Tut_1.active = true;\n        tween(this.Tut_1.getComponent(UIOpacity))\n            .to(0.5, { opacity: 255 }, { easing: easing.smooth })\n            .start();\n\n        tween(this.Tut_1)\n            .repeatForever(tween(this.Tut_1)\n                .to(0.5, { scale: new Vec3(1, 1, 1) }, { easing: easing.smooth })\n                .to(0.5, { scale: new Vec3(0.95, 0.95, 0.95) }, { easing: easing.smooth })\n            ).start();\n    }\n\n\n    public handleCollectItems(node: Node): void {\n        GameInfo.isCanTouch = false;\n\n        log(this.currentStockItem)\n\n        tween(node)\n            .to(0.2,\n                { worldPosition: this.Melon_AirPoint.worldPosition, scale: new Vec3(1.28, 1.28, 1.28) },\n                { easing: easing.sineIn })\n            .start();\n\n        tween(node)\n            .delay(0.2)\n            .to(0.2,\n                { worldPosition: this.MelonInBoxes[this.currentCollectItem].worldPosition },\n                { easing: easing.sineOut })\n            .call(() => this.handleActiveMelonInBox(node))\n            .start();\n    }\n\n\n    private handleActiveMelonInBox(tweenNode: Node): void {\n        GameInfo.isCanTouch = true;\n        tweenNode.active = false;\n        this.MelonInBoxes[this.currentCollectItem].active = true;\n\n        // this.currentStockItem += 1;\n        this.currentCollectItem += 1;\n\n        if (this.currentCollectItem >= 4) {\n            GameInfo.PA_07.isStockFullBox = true;\n            this.Tut_1.active = false;\n        }\n    }\n\n\n    public handleStockTheShelves(): void {\n        GameInfo.isCanTouch = false;\n\n        // log(this.currentStockItem)\n\n        tween(this.MelonInBoxes[this.currentStockItem])\n            .to(0.2,\n                { worldPosition: this.Melon_AirPoint_2.worldPosition, scale: new Vec3(100, 100, 100) },\n                { easing: easing.sineIn })\n            .start();\n\n        tween(this.MelonInBoxes[this.currentStockItem])\n            .delay(0.2)\n            .to(0.2,\n                { worldPosition: this.MelonDisabled[this.currentStockItem].worldPosition },\n                { easing: easing.sineOut })\n            .call(() => this.handleActiveMelonInShelves(this.MelonInBoxes[this.currentStockItem]))\n            .start();\n    }\n\n\n    private handleActiveMelonInShelves(tweenNode: Node): void {\n        GameInfo.isCanTouch = true;\n        tweenNode.active = false;\n        this.MelonDisabled[this.currentStockItem].active = true;\n\n        this.currentStockItem += 1;\n\n        if (this.currentStockItem >= 4) {\n            GameInfo.isCanTouch = false;\n\n            this.Tut_2.active = false;\n\n            GameInfo.isWin = true;\n\n            GameInfo.PA_07.isStockFullShelve = true;\n\n            this.PS_conffeti.active = true;\n\n            this.CTA.node.active = true;\n\n            SoundController.Instance(SoundController).PlaySound(\"winSound\")\n        }\n    }\n\n\n    protected update(dt: number): void {\n        GameInfo.PA_07.isCameraArrivedPont && !this.Box.active && this.showBox();\n    }\n}\n"]}